(()=>{"use strict";const a=async a=>{const n=await(async a=>{const n=await fetch("https://flagcdn.com/en/codes.json"),t=await n.json(),e=Object.entries(t).filter((n=>n[1]===a));if(0!==e.length)return e[0][0]})(a);if(void 0!==n)return`https://flagcdn.com/16x12/${n}.png`},n="https://api.football-data.org/v2/",t=new Headers;t.append("X-Auth-token","902b5753945549c29f320b6e2e63907e");const e={method:"GET",headers:t},s=async a=>{const t=await fetch(`${n}teams/${a}`,e);return await t.json()},i=async a=>{const t=await fetch(`${n}competitions/${a}/standings?standingType=HOME`,e);return await t.json()},o=()=>"<h2>Error 404</h2>",d=()=>location.hash.slice(1).toLowerCase().replaceAll("/","")||"/",l={"/":async()=>`\n        <div class="teams-container">\n            ${(await(async()=>(await(async a=>{const t=await fetch(`${n}competitions/2014/teams`,e);return await t.json()})()).teams)()).map((a=>`\n                <div class="team-card">\n                    <a href="#/${a.id}"><img src="${a.crestUrl}" alt="${a.name}"></a>\n                </div>\n            `)).join("")}\n        </div>\n    `,"/:id":async()=>{const n=d(),t=await s(n),e=await(async n=>{const t=(await s(n)).squad.map((a=>{const n=new Object;return n.name=a.name,n.nationality=a.nationality,n.age=(a=>{const n=a.dateOfBirth?new Date(a.dateOfBirth):"",t=new Date;if(!n)return"No birthdate data";const e=t.getTime()-n.getTime();return Math.floor(e/31536e6)})(a),"PLAYER"===a.role&&(n.position=a.position.toLowerCase()),"COACH"===a.role&&(n.position=a.role.toLowerCase()),n}));return await(async n=>{console.log(n);for(let t=0;t<n.length;t++){let e=await a(n[t].nationality);void 0===e&&(e="./imgs/icon-countryflag-undefined.png"),n[t].countryFlag=e}return n})(t),(a=>({coachs:a.filter((a=>"coach"===a.position)),goalkeepers:a.filter((a=>"goalkeeper"===a.position)),defenders:a.filter((a=>"defender"===a.position)),midfielders:a.filter((a=>"midfielder"===a.position)),attackers:a.filter((a=>"attacker"===a.position))}))(t)})(n),o=await(async a=>{const n=(await i(2014)).standings[0].table,t=n.filter((n=>{if(parseInt(a)===n.team.id)return n}))[0].position-1;return t<4?n.slice(0,7):t>16?n.slice(13,20):n.slice(t-3,t+4)})(n);return console.log(o),new Date,`\n        <div class="team-container">\n            <div class="team-info">\n                <div class="team-info--header">\n                    <img src="${t.crestUrl}" alt="${t.name}">\n                    <h2>${t.name}</h2>\n                </div>\n                <p>Fundado: ${t.founded}</p>\n                <p>Website: <a href="${t.website}" target="blank">${t.website}</a></p>\n            </div>\n            <div class="team-squad">\n                <h3>Cuerpo técnico</h3>\n                ${e.coachs.map((a=>`\n                    <div class="team-player"><span class="player-position ${a.position}"></span> ${a.name} <img class="country-flag" src="${a.countryFlag}" alt="${a.nationality}"> <span class="player-age">${a.age} años</span> </div>\n                `)).join("")}\n                <h3>Porteros</h3>\n                ${e.goalkeepers.map((a=>`\n                    <div class="team-player"><span class="player-position ${a.position}"></span> ${a.name} <img class="country-flag" src="${a.countryFlag}" alt="${a.nationality}"> <span class="player-age">${a.age} años</span> </div>\n                `)).join("")}\n                <h3>Defensas</h3>\n                ${e.defenders.map((a=>`\n                    <div class="team-player"><span class="player-position ${a.position}"></span> ${a.name} <img class="country-flag" src="${a.countryFlag}" alt="${a.nationality}"> <span class="player-age">${a.age} años</span> </div>\n                `)).join("")}\n                <h3>Centrocampistas</h3>\n                ${e.midfielders.map((a=>`\n                    <div class="team-player"><span class="player-position ${a.position}"></span> ${a.name} <img class="country-flag" src="${a.countryFlag}" alt="${a.nationality}"> <span class="player-age">${a.age} años</span> </div>\n                `)).join("")}\n                <h3>Delanteros</h3>\n                ${e.attackers.map((a=>`\n                    <div class="team-player"><span class="player-position ${a.position}"></span> ${a.name} <img class="country-flag" src="${a.countryFlag}" alt="${a.nationality}"> <span class="player-age">${a.age} años</span> </div>\n                `)).join("")}\n            </div>\n            <div class="team-standings">\n                <table>\n                    <tr class="team-standings--title">\n                        <td>Pos.</td>\n                        <td>Equipo</td>\n                        <td>Puntos</td>\n                    </tr>\n                ${o.map((a=>`\n                    \n                    <tr class="${a.team.id===parseInt(n)?"team-name--current":"team-name"}">\n                        <td>${a.position}</td>\n                        <td>${a.team.name}</td>\n                        <td>${a.points}</td>\n                    </tr>\n                    \n                `)).join("")}\n                </table>\n            </div>\n        </div>\n    `},"/laliga":async()=>{const a=await i(2014),n=a.standings[0].table;return console.log(n),`\n        <div class="clasification">\n            <h1>${a.competition.name}</h1>\n            <table>\n                <tbody>\n                    <tr>\n                        <td>Posición</td>\n                        <td>Equipo</td>\n                        <td>PJ</td>\n                        <td>G</td>\n                        <td>E</td>\n                        <td>P</td>\n                        <td>Goals</td>\n                        <td>Pts.</td>\n                        <td>Forma</td>\n                    </tr>\n                    ${n.map((a=>`                \n                        <tr>\n                            <td>${a.position}</td>\n                            <td>${a.team.name}</td>\n                            <td>${a.playedGames}</td>\n                            <td>${a.won}</td>\n                            <td>${a.draw}</td>\n                            <td>${a.lost}</td>\n                            <td>${a.goalsFor}:${a.goalsAgainst}</td>\n                            <td>${a.points}</td>\n                            <td>${a.form}</td>\n                        </tr>\n                    `)).join("")}\n                </tbody>\n        </table>\n    </div>\n    `},"/about":()=>'\n        <div class="about-section-container">\n            <p>Proyecto creado como ejemplo del curso de Single Page Application con Javascript Vanilla de Platzi.</p>\n        </div>\n    '},r=async()=>{const a=document.getElementById("header"),n=document.getElementById("content");a.innerHTML=await'\n        <div class="header-main">\n            <div class="header-logo">\n                <h1><a href="/">FootballApp</a></h1>\n            </div>\n            <div class="header-nav">\n                <a href="#/laliga">Clasificación</a>\n                <a href="#/About">About</a>\n            </div>\n        </div>\n    ';let t=d(),e=await(a=>a.length<=4?"/"===a?a:"/:id":`/${a}`)(t),s=l[e]?l[e]:o;n.innerHTML=await s()};window.addEventListener("load",r),window.addEventListener("hashchange",r)})();